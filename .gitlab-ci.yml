include:
    - 'templates/.register.yml'
    - 'templates/.deploy.yml'

stages:
    - register
    - deploy
    - generate

variables:
    ACTION:
        description: 'Action à exécuter'
        value: 'none'
        options:
            - 'none'
            - 'generate_article'

generate_article:
    image: node:18-alpine
    stage: generate
    script:
        - npm install
        - chmod +x ./generate-article.sh
        - ./generate-article.sh
    rules:
        - if: $ACTION == "generate_article"
